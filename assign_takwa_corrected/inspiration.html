<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vote FLow - Tableau de bord</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://www.highcharts.com/highslide/highslide.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/maps/modules/map.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f5f5f5;
            color: #333;
        }

        .header {
            background-color: #2c3e50;
            color: white;
            padding: 0 20px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 18px;
            font-weight: bold;
        }

        .logo-icon {
            background-color: #3498db;
            padding: 8px;
            border-radius: 4px;
            font-size: 16px;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .notification {
            position: relative;
            cursor: pointer;
        }

        .notification-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: #e74c3c;
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            background-color: #3498db;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .nav-menu {
            background-color: #34495e;
            padding: 0 20px;
            height: 50px;
            display: flex;
            align-items: center;
            gap: 30px;
        }

        .nav-item {
            position: relative;
            color: white;
            text-decoration: none;
            padding: 15px 0;
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            transition: color 0.3s;
        }

        .nav-item:hover {
            color: #3498db;
        }

        .nav-item.active {
            color: #3498db;
            border-bottom: 2px solid #3498db;
        }

        .dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            min-width: 200px;
            z-index: 1000;
            display: none;
        }

        .dropdown.show {
            display: block;
        }

        .dropdown-item {
            padding: 12px 16px;
            color: #333;
            text-decoration: none;
            display: block;
            transition: background-color 0.3s;
        }

        .dropdown-item:hover {
            background-color: #f8f9fa;
        }

        .main-content {
            padding: 30px;
        }

        .page-header {
            margin-bottom: 30px;
        }

        .page-title {
            font-size: 28px;
            color: #2c3e50;
            margin-bottom: 8px;
        }

        .page-subtitle {
            color: #7f8c8d;
            font-size: 16px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .stat-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
        }

        .stat-icon.blue { background-color: #3498db; }
        .stat-icon.green { background-color: #2ecc71; }
        .stat-icon.yellow { background-color: #f39c12; }
        .stat-icon.orange { background-color: #e67e22; }

        .stat-info h3 {
            font-size: 24px;
            margin-bottom: 5px;
            color: #2c3e50;
        }

        .stat-info p {
            color: #7f8c8d;
            font-size: 14px;
        }

        .status-badge {
            background-color: #e74c3c;
            color: white;
            padding: 2px 6px;
            border-radius: 10px;
            font-size: 10px;
            margin-left: 5px;
        }

        .data-table {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .table-header {
            padding: 20px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .table-title {
            font-size: 18px;
            font-weight: 600;
            color: #2c3e50;
        }

        .search-container {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .search-input {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            width: 200px;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }

        .btn-primary {
            background-color: #3498db;
            color: white;
        }

        .btn-primary:hover {
            background-color: #2980b9;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        th {
            background-color: #f8f9fa;
            font-weight: 600;
            color: #2c3e50;
        }

        .action-buttons {
            display: flex;
            gap: 8px;
        }

        .action-btn {
            padding: 4px 8px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }

        .view-btn {
            background-color: #3498db;
            color: white;
        }

        .edit-btn {
            background-color: #f39c12;
            color: white;
        }

        .delete-btn {
            background-color: #e74c3c;
            color: white;
        }

        .action-btn:hover {
            opacity: 0.8;
        }

        .page-content {
            display: none;
        }

        .page-content.active {
            display: block;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #2c3e50;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .form-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-top: 20px;
        }

        .btn-secondary {
            background-color: #95a5a6;
            color: white;
        }

        .btn-secondary:hover {
            background-color: #7f8c8d;
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="logo">
            <div class="logo-icon">E</div>
            <span>Vote FLow</span>
        </div>
        <div class="user-info">
            <div class="notification">
                <i class="fas fa-bell"></i>
                <div class="notification-badge">3</div>
            </div>
            <div class="user-profile">
                <div class="user-avatar"><i class="fas fa-user"></i></div>
                <div>
                    <div style="font-size: 14px; font-weight: 500;">Admin Système</div>
                    <div style="font-size: 12px; color: #bdc3c7;">Administrateur</div>
                </div>
                <i class="fas fa-chevron-down"></i>
            </div>
        </div>
    </header>

    <nav class="nav-menu">
        <a href="#" class="nav-item active" onclick="showPage('dashboard')">
            <i class="fas fa-gauge"></i> Tableau de bord
        </a>
        <div class="nav-item" onclick="toggleDropdown('gestion')">
            <i class="fas fa-database"></i> Gestion territoriale <i class="fas fa-chevron-down"></i>
            <div class="dropdown" id="gestion-dropdown">
                <a href="#" class="dropdown-item" onclick="showPage('regions')"><i class="fas fa-globe"></i> Région</a>
                <a href="#" class="dropdown-item" onclick="showPage('departements')"><i class="fas fa-layer-group"></i> Département</a>
                <a href="#" class="dropdown-item" onclick="showPage('arrondissements')"><i class="fas fa-map"></i> Arrondissement</a>
                <a href="#" class="dropdown-item" onclick="showPage('bureaux')"><i class="fas fa-building"></i> Bureau de vote</a>
            </div>
        </div>
        <div class="nav-item" onclick="toggleDropdown('elections')">
            <i class="fas fa-square-check"></i> Élections <i class="fas fa-chevron-down"></i>
            <div class="dropdown" id="elections-dropdown">
                <a href="#" class="dropdown-item" onclick="showPage('partis')"><i class="fas fa-users"></i> Parti politique</a>
                <a href="#" class="dropdown-item" onclick="showPage('candidats')"><i class="fas fa-user-tie"></i> Candidat</a>
                <a href="#" class="dropdown-item" onclick="showPage('participation')"><i class="fas fa-chart-line"></i> Participation</a>
                <a href="#" class="dropdown-item" onclick="showPage('proces-verbaux')"><i class="fas fa-file-alt"></i> Procès verbaux</a>
            </div>
        </div>
        <div class="nav-item" onclick="toggleDropdown('syntheses')">
            <i class="fas fa-chart-column"></i> Synthèses <i class="fas fa-chevron-down"></i>
            <div class="dropdown" id="syntheses-dropdown">
                <a href="#" class="dropdown-item" onclick="showPage('synthese-region')"><i class="fas fa-chart-area"></i> Synthèse région</a>
                <a href="#" class="dropdown-item" onclick="showPage('synthese-departement')"><i class="fas fa-chart-bar"></i> Synthèse département</a>
                <a href="#" class="dropdown-item" onclick="showPage('synthese-arrondissement')"><i class="fas fa-analytics"></i> Synthèse arrondissement</a>
            </div>
        </div>
        <div class="nav-item" onclick="toggleDropdown('administration')">
            <i class="fas fa-gear"></i> Administration <i class="fas fa-chevron-down"></i>
            <div class="dropdown" id="administration-dropdown">
                <a href="#" class="dropdown-item" onclick="showPage('utilisateurs')"><i class="fas fa-users-cog"></i> Utilisateurs</a>
                <a href="#" class="dropdown-item" onclick="showPage('roles')"><i class="fas fa-user-shield"></i> Rôles</a>
                <a href="#" class="dropdown-item" onclick="showPage('permissions')"><i class="fas fa-key"></i> Permissions</a>
                <a href="#" class="dropdown-item" onclick="showPage('journaux')"><i class="fas fa-history"></i> Journaux</a>
            </div>
        </div>
    </nav>

    <main class="main-content">
        <!-- Dashboard Page -->
        <div id="dashboard" class="page-content active">
            <div class="page-header">
                <h1 class="page-title">Tableau de bord des élections</h1>
                <p class="page-subtitle">Vue d'ensemble du processus électoral</p>
            </div>

            <div style="display: flex; gap: 30px; margin-top: 30px; align-items: flex-start;">
                <!-- Left Column: Map -->
                <div style="flex: 1 1 0; min-width: 0; max-width: 50%; height: 700px; display: flex; flex-direction: column;">
                    <div class="map-container data-table" style="height: 100%; display: flex; flex-direction: column;">
                        <div class="table-header">
                            <h2 class="table-title">Carte interactive des résultats</h2>
                        </div>
                        <div id="map-container-div" style="height: 600px;"></div>
                        <!-- Party Legend -->
                        <div id="party-legend" style="display: flex; gap: 18px; justify-content: center; align-items: center; padding: 16px 0 8px 0; flex-wrap: wrap;">
                            <!-- Legend will be rendered by JS -->
                        </div>
                    </div>
                </div>
                <!-- Right Column: Cards + National Results -->
                <div style="flex: 1 1 0; min-width: 0; max-width: 50%; height: 700px; display: flex; flex-direction: column; gap: 30px;">
                    <!-- Stat Cards (2 per row) -->
                    <div class="stats-grid" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-bottom: 0;">
                        <div class="stat-card">
                            <div class="stat-icon blue"><i class="fas fa-users"></i></div>
                            <div class="stat-info">
                                <h3>24,583</h3>
                                <p>Électeurs inscrits</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon green"><i class="fas fa-chart-line"></i></div>
                            <div class="stat-info">
                                <h3>67%</h3>
                                <p>Taux de participation</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon yellow"><i class="fas fa-file-lines"></i></div>
                            <div class="stat-info">
                                <h3>156/178</h3>
                                <p>Procès verbaux reçus <span class="status-badge">Réduit</span></p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon orange"><i class="fas fa-check-circle"></i></div>
                            <div class="stat-info">
                                <h3>87%</h3>
                                <p>Bureaux dépouillés</p>
                            </div>
                        </div>
                    </div>
                    <!-- Party Results -->
                    <div id="party-stats-container" class="data-table" style="height: 100%;">
                        <div class="table-header">
                             <h3 class="table-title">Résultats Nationaux par Parti</h3>
                        </div>
                        <div id="national-stats-content" style="padding: 20px;">
                            <!-- Party stats will be rendered here by JS -->
                        </div>
                    </div>
                </div>
            </div>

            <div class="data-table" style="margin-top: 30px;">
                <div class="table-header">
                    <h2 class="table-title">Bureaux de vote récemment mis à jour</h2>
                    <div class="search-container">
                        <input type="text" class="search-input" placeholder="Rechercher...">
                        <button class="btn btn-primary"><i class="fas fa-plus"></i> Ajouter</button>
                    </div>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>CODE</th>
                            <th>DÉSIGNATION</th>
                            <th>ARRONDISSEMENT</th>
                            <th>INSCRITS</th>
                            <th>VOTANTS</th>
                            <th>TAUX (%)</th>
                            <th>ACTIONS</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>BV001</td>
                            <td>École Primaire Centrale</td>
                            <td>Centre-Ville</td>
                            <td>450</td>
                            <td>325</td>
                            <td>72.2</td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn view-btn"><i class="fas fa-eye"></i></button>
                                    <button class="action-btn edit-btn"><i class="fas fa-edit"></i></button>
                                    <button class="action-btn delete-btn"><i class="fas fa-trash"></i></button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>BV002</td>
                            <td>Mairie Principale</td>
                            <td>Centre-Ville</td>
                            <td>380</td>
                            <td>290</td>
                            <td>76.3</td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn view-btn"><i class="fas fa-eye"></i></button>
                                    <button class="action-btn edit-btn"><i class="fas fa-edit"></i></button>
                                    <button class="action-btn delete-btn"><i class="fas fa-trash"></i></button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Regions Page -->
        <div id="regions" class="page-content">
            <div class="page-header">
                <h1 class="page-title">Gestion des Régions</h1>
                <p class="page-subtitle">Configuration et gestion des régions</p>
            </div>
            <div class="data-table">
                <div class="table-header">
                    <h2 class="table-title">Liste des Régions</h2>
                    <div class="search-container">
                        <input type="text" class="search-input" placeholder="Rechercher une région...">
                        <button class="btn btn-primary"><i class="fas fa-plus"></i> Nouvelle région</button>
                    </div>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>CODE</th>
                            <th>NOM</th>
                            <th>DÉPARTEMENTS</th>
                            <th>POPULATION</th>
                            <th>ACTIONS</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>REG001</td>
                            <td>Centre</td>
                            <td>10</td>
                            <td>3,098,044</td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn view-btn"><i class="fas fa-eye"></i></button>
                                    <button class="action-btn edit-btn"><i class="fas fa-edit"></i></button>
                                    <button class="action-btn delete-btn"><i class="fas fa-trash"></i></button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Departements Page -->
        <div id="departements" class="page-content">
            <div class="page-header">
                <h1 class="page-title">Gestion des Départements</h1>
                <p class="page-subtitle">Configuration et gestion des départements</p>
            </div>
            <div class="data-table">
                <div class="table-header">
                    <h2 class="table-title">Liste des Départements</h2>
                    <div class="search-container">
                        <input type="text" class="search-input" placeholder="Rechercher un département...">
                        <button class="btn btn-primary"><i class="fas fa-plus"></i> Nouveau département</button>
                    </div>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>CODE</th>
                            <th>NOM</th>
                            <th>RÉGION</th>
                            <th>ARRONDISSEMENTS</th>
                            <th>ACTIONS</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>DEP001</td>
                            <td>Mfoundi</td>
                            <td>Centre</td>
                            <td>7</td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn view-btn"><i class="fas fa-eye"></i></button>
                                    <button class="action-btn edit-btn"><i class="fas fa-edit"></i></button>
                                    <button class="action-btn delete-btn"><i class="fas fa-trash"></i></button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Arrondissements Page -->
        <div id="arrondissements" class="page-content">
            <div class="page-header">
                <h1 class="page-title">Gestion des Arrondissements</h1>
                <p class="page-subtitle">Configuration et gestion des arrondissements</p>
            </div>
            <div class="data-table">
                <div class="table-header">
                    <h2 class="table-title">Liste des Arrondissements</h2>
                    <div class="search-container">
                        <input type="text" class="search-input" placeholder="Rechercher un arrondissement...">
                        <button class="btn btn-primary"><i class="fas fa-plus"></i> Nouvel arrondissement</button>
                    </div>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>CODE</th>
                            <th>NOM</th>
                            <th>DÉPARTEMENT</th>
                            <th>BUREAUX DE VOTE</th>
                            <th>ACTIONS</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>ARR001</td>
                            <td>Yaoundé I</td>
                            <td>Mfoundi</td>
                            <td>25</td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn view-btn"><i class="fas fa-eye"></i></button>
                                    <button class="action-btn edit-btn"><i class="fas fa-edit"></i></button>
                                    <button class="action-btn delete-btn"><i class="fas fa-trash"></i></button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Bureaux Page -->
        <div id="bureaux" class="page-content">
            <div class="page-header">
                <h1 class="page-title">Gestion des Bureaux de Vote</h1>
                <p class="page-subtitle">Configuration et gestion des bureaux de vote</p>
            </div>
            <div class="data-table">
                <div class="table-header">
                    <h2 class="table-title">Liste des Bureaux de Vote</h2>
                    <div class="search-container">
                        <input type="text" class="search-input" placeholder="Rechercher un bureau...">
                        <button class="btn btn-primary"><i class="fas fa-plus"></i> Nouveau bureau</button>
                    </div>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>CODE</th>
                            <th>DÉSIGNATION</th>
                            <th>ARRONDISSEMENT</th>
                            <th>ADRESSE</th>
                            <th>CAPACITÉ</th>
                            <th>ACTIONS</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>BV001</td>
                            <td>École Primaire Centrale</td>
                            <td>Centre-Ville</td>
                            <td>Rue de la Réunification</td>
                            <td>500</td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn view-btn"><i class="fas fa-eye"></i></button>
                                    <button class="action-btn edit-btn"><i class="fas fa-edit"></i></button>
                                    <button class="action-btn delete-btn"><i class="fas fa-trash"></i></button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Partis Page -->
        <div id="partis" class="page-content">
            <div class="page-header">
                <h1 class="page-title">Gestion des Partis Politiques</h1>
                <p class="page-subtitle">Configuration et gestion des partis politiques</p>
            </div>
            <div class="data-table">
                <div class="table-header">
                    <h2 class="table-title">Liste des Partis Politiques</h2>
                    <div class="search-container">
                        <input type="text" class="search-input" placeholder="Rechercher un parti...">
                        <button class="btn btn-primary"><i class="fas fa-plus"></i> Nouveau parti</button>
                    </div>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>CODE</th>
                            <th>NOM</th>
                            <th>SIGLE</th>
                            <th>PRÉSIDENT</th>
                            <th>STATUT</th>
                            <th>ACTIONS</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>PP001</td>
                            <td>Rassemblement Démocratique du Peuple Camerounais</td>
                            <td>RDPC</td>
                            <td>Paul Biya</td>
                            <td>Actif</td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn view-btn"><i class="fas fa-eye"></i></button>
                                    <button class="action-btn edit-btn"><i class="fas fa-edit"></i></button>
                                    <button class="action-btn delete-btn"><i class="fas fa-trash"></i></button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Candidats Page -->
        <div id="candidats" class="page-content">
            <div class="page-header">
                <h1 class="page-title">Gestion des Candidats</h1>
                <p class="page-subtitle">Configuration et gestion des candidats</p>
            </div>
            <div class="data-table">
                <div class="table-header">
                    <h2 class="table-title">Liste des Candidats</h2>
                    <div class="search-container">
                        <input type="text" class="search-input" placeholder="Rechercher un candidat...">
                        <button class="btn btn-primary"><i class="fas fa-plus"></i> Nouveau candidat</button>
                    </div>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>CODE</th>
                            <th>NOM</th>
                            <th>PARTI</th>
                            <th>POSTE</th>
                            <th>STATUT</th>
                            <th>ACTIONS</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>CAN001</td>
                            <td>Jean Dupont</td>
                            <td>RDPC</td>
                            <td>Maire</td>
                            <td>Validé</td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn view-btn"><i class="fas fa-eye"></i></button>
                                    <button class="action-btn edit-btn"><i class="fas fa-edit"></i></button>
                                    <button class="action-btn delete-btn"><i class="fas fa-trash"></i></button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Participation Page -->
        <div id="participation" class="page-content">
            <div class="page-header">
                <h1 class="page-title">Taux de Participation</h1>
                <p class="page-subtitle">Suivi de la participation électorale</p>
            </div>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon blue"><i class="fas fa-users"></i></div>
                    <div class="stat-info">
                        <h3>67%</h3>
                        <p>Taux global</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon green"><i class="fas fa-person"></i></div>
                    <div class="stat-info">
                        <h3>64%</h3>
                        <p>Hommes</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon yellow"><i class="fas fa-person-dress"></i></div>
                    <div class="stat-info">
                        <h3>70%</h3>
                        <p>Femmes</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon orange"><i class="fas fa-city"></i></div>
                    <div class="stat-info">
                        <h3>72%</h3>
                        <p>Zones urbaines</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Procès verbaux Page -->
        <div id="proces-verbaux" class="page-content">
            <div class="page-header">
                <h1 class="page-title">Procès Verbaux</h1>
                <p class="page-subtitle">Gestion des procès verbaux électoraux</p>
            </div>
            <div class="data-table">
                <div class="table-header">
                    <h2 class="table-title">Liste des Procès Verbaux</h2>
                    <div class="search-container">
                        <input type="text" class="search-input" placeholder="Rechercher un PV...">
                        <button class="btn btn-primary"><i class="fas fa-plus"></i> Nouveau PV</button>
                    </div>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>NUMÉRO</th>
                            <th>BUREAU</th>
                            <th>DATE</th>
                            <th>STATUT</th>
                            <th>ACTIONS</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>PV001</td>
                            <td>École Primaire Centrale</td>
                            <td>14/07/2025</td>
                            <td>Validé</td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn view-btn"><i class="fas fa-eye"></i></button>
                                    <button class="action-btn edit-btn"><i class="fas fa-edit"></i></button>
                                    <button class="action-btn delete-btn"><i class="fas fa-trash"></i></button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Synthèse Région Page -->
        <div id="synthese-region" class="page-content">
            <div class="page-header">
                <h1 class="page-title">Synthèse par Région</h1>
                <p class="page-subtitle">Résultats consolidés par région</p>
            </div>
            <div class="data-table">
                <div class="table-header">
                    <h2 class="table-title">Résultats par Région</h2>
                    <div class="search-container">
                        <input type="text" class="search-input" placeholder="Rechercher une région...">
                        <button class="btn btn-primary"><i class="fas fa-chart-bar"></i> Générer rapport</button>
                    </div>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>RÉGION</th>
                            <th>INSCRITS</th>
                            <th>VOTANTS</th>
                            <th>PARTICIPATION</th>
                            <th>BUREAUX</th>
                            <th>ACTIONS</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Centre</td>
                            <td>3,098,044</td>
                            <td>2,075,689</td>
                            <td>67%</td>
                            <td>1,250</td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn view-btn"><i class="fas fa-eye"></i></button>
                                    <button class="action-btn edit-btn"><i class="fas fa-chart-bar"></i></button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Synthèse Département Page -->
        <div id="synthese-departement" class="page-content">
            <div class="page-header">
                <h1 class="page-title">Synthèse par Département</h1>
                <p class="page-subtitle">Résultats consolidés par département</p>
            </div>
            <div class="data-table">
                <div class="table-header">
                    <h2 class="table-title">Résultats par Département</h2>
                    <div class="search-container">
                        <input type="text" class="search-input" placeholder="Rechercher un département...">
                        <button class="btn btn-primary"><i class="fas fa-chart-bar"></i> Générer rapport</button>
                    </div>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>DÉPARTEMENT</th>
                            <th>RÉGION</th>
                            <th>INSCRITS</th>
                            <th>VOTANTS</th>
                            <th>PARTICIPATION</th>
                            <th>ACTIONS</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Mfoundi</td>
                            <td>Centre</td>
                            <td>1,817,524</td>
                            <td>1,235,482</td>
                            <td>68%</td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn view-btn"><i class="fas fa-eye"></i></button>
                                    <button class="action-btn edit-btn"><i class="fas fa-chart-bar"></i></button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Synthèse Arrondissement Page -->
        <div id="synthese-arrondissement" class="page-content">
            <div class="page-header">
                <h1 class="page-title">Synthèse par Arrondissement</h1>
                <p class="page-subtitle">Résultats consolidés par arrondissement</p>
            </div>
            <div class="data-table">
                <div class="table-header">
                    <h2 class="table-title">Résultats par Arrondissement</h2>
                    <div class="search-container">
                        <input type="text" class="search-input" placeholder="Rechercher un arrondissement...">
                        <button class="btn btn-primary"><i class="fas fa-chart-bar"></i> Générer rapport</button>
                    </div>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>ARRONDISSEMENT</th>
                            <th>DÉPARTEMENT</th>
                            <th>INSCRITS</th>
                            <th>VOTANTS</th>
                            <th>PARTICIPATION</th>
                            <th>ACTIONS</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Yaoundé I</td>
                            <td>Mfoundi</td>
                            <td>245,890</td>
                            <td>178,341</td>
                            <td>72.5%</td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn view-btn"><i class="fas fa-eye"></i></button>
                                    <button class="action-btn edit-btn"><i class="fas fa-chart-bar"></i></button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Utilisateurs Page -->
        <div id="utilisateurs" class="page-content">
            <div class="page-header">
                <h1 class="page-title">Gestion des Utilisateurs</h1>
                <p class="page-subtitle">Administration des comptes utilisateurs</p>
            </div>
            <div class="data-table">
                <div class="table-header">
                    <h2 class="table-title">Liste des Utilisateurs</h2>
                    <div class="search-container">
                        <input type="text" class="search-input" placeholder="Rechercher un utilisateur...">
                        <button class="btn btn-primary"><i class="fas fa-plus"></i> Nouvel utilisateur</button>
                    </div>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>NOM</th>
                            <th>EMAIL</th>
                            <th>RÔLE</th>
                            <th>STATUT</th>
                            <th>DERNIÈRE CONNEXION</th>
                            <th>ACTIONS</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Admin Système</td>
                            <td>admin@Vote FLow.cm</td>
                            <td>Administrateur</td>
                            <td>Actif</td>
                            <td>14/07/2025 10:30</td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn view-btn"><i class="fas fa-eye"></i></button>
                                    <button class="action-btn edit-btn"><i class="fas fa-edit"></i></button>
                                    <button class="action-btn delete-btn"><i class="fas fa-trash"></i></button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>Jean Superviseur</td>
                            <td>jean@Vote FLow.cm</td>
                            <td>Superviseur</td>
                            <td>Actif</td>
                            <td>14/07/2025 09:15</td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn view-btn"><i class="fas fa-eye"></i></button>
                                    <button class="action-btn edit-btn"><i class="fas fa-edit"></i></button>
                                    <button class="action-btn delete-btn"><i class="fas fa-trash"></i></button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Rôles Page -->
        <div id="roles" class="page-content">
            <div class="page-header">
                <h1 class="page-title">Gestion des Rôles</h1>
                <p class="page-subtitle">Configuration des rôles et privilèges</p>
            </div>
            <div class="data-table">
                <div class="table-header">
                    <h2 class="table-title">Liste des Rôles</h2>
                    <div class="search-container">
                        <input type="text" class="search-input" placeholder="Rechercher un rôle...">
                        <button class="btn btn-primary"><i class="fas fa-plus"></i> Nouveau rôle</button>
                    </div>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>NOM</th>
                            <th>DESCRIPTION</th>
                            <th>PERMISSIONS</th>
                            <th>UTILISATEURS</th>
                            <th>ACTIONS</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Administrateur</td>
                            <td>Accès complet au système</td>
                            <td>Toutes</td>
                            <td>1</td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn view-btn"><i class="fas fa-eye"></i></button>
                                    <button class="action-btn edit-btn"><i class="fas fa-edit"></i></button>
                                    <button class="action-btn delete-btn"><i class="fas fa-trash"></i></button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>Superviseur</td>
                            <td>Supervision des opérations</td>
                            <td>Lecture/Écriture</td>
                            <td>5</td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn view-btn"><i class="fas fa-eye"></i></button>
                                    <button class="action-btn edit-btn"><i class="fas fa-edit"></i></button>
                                    <button class="action-btn delete-btn"><i class="fas fa-trash"></i></button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>Opérateur</td>
                            <td>Saisie des données</td>
                            <td>Lecture/Écriture limitée</td>
                            <td>12</td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn view-btn"><i class="fas fa-eye"></i></button>
                                    <button class="action-btn edit-btn"><i class="fas fa-edit"></i></button>
                                    <button class="action-btn delete-btn"><i class="fas fa-trash"></i></button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Permissions Page -->
        <div id="permissions" class="page-content">
            <div class="page-header">
                <h1 class="page-title">Gestion des Permissions</h1>
                <p class="page-subtitle">Configuration des permissions système</p>
            </div>
            <div class="data-table">
                <div class="table-header">
                    <h2 class="table-title">Liste des Permissions</h2>
                    <div class="search-container">
                        <input type="text" class="search-input" placeholder="Rechercher une permission...">
                        <button class="btn btn-primary"><i class="fas fa-plus"></i> Nouvelle permission</button>
                    </div>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>MODULE</th>
                            <th>PERMISSION</th>
                            <th>DESCRIPTION</th>
                            <th>RÔLES</th>
                            <th>ACTIONS</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Élections</td>
                            <td>elections.create</td>
                            <td>Créer des élections</td>
                            <td>Administrateur, Superviseur</td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn view-btn"><i class="fas fa-eye"></i></button>
                                    <button class="action-btn edit-btn"><i class="fas fa-edit"></i></button>
                                    <button class="action-btn delete-btn"><i class="fas fa-trash"></i></button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>Bureaux</td>
                            <td>bureaux.read</td>
                            <td>Consulter les bureaux</td>
                            <td>Tous</td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn view-btn"><i class="fas fa-eye"></i></button>
                                    <button class="action-btn edit-btn"><i class="fas fa-edit"></i></button>
                                    <button class="action-btn delete-btn"><i class="fas fa-trash"></i></button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>Résultats</td>
                            <td>resultats.update</td>
                            <td>Modifier les résultats</td>
                            <td>Administrateur</td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn view-btn"><i class="fas fa-eye"></i></button>
                                    <button class="action-btn edit-btn"><i class="fas fa-edit"></i></button>
                                    <button class="action-btn delete-btn"><i class="fas fa-trash"></i></button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Journaux Page -->
        <div id="journaux" class="page-content">
            <div class="page-header">
                <h1 class="page-title">Journaux d'Activité</h1>
                <p class="page-subtitle">Historique des actions système</p>
            </div>
            <div class="data-table">
                <div class="table-header">
                    <h2 class="table-title">Journal des Activités</h2>
                    <div class="search-container">
                        <input type="text" class="search-input" placeholder="Rechercher dans les journaux...">
                        <button class="btn btn-primary"><i class="fas fa-search"></i> Filtrer</button>
                    </div>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>DATE/HEURE</th>
                            <th>UTILISATEUR</th>
                            <th>ACTION</th>
                            <th>MODULE</th>
                            <th>DÉTAILS</th>
                            <th>ACTIONS</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>14/07/2025 10:30</td>
                            <td>Admin Système</td>
                            <td>Connexion</td>
                            <td>Authentification</td>
                            <td>Connexion réussie</td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn view-btn"><i class="fas fa-eye"></i></button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>14/07/2025 10:25</td>
                            <td>Jean Superviseur</td>
                            <td>Modification</td>
                            <td>Bureaux</td>
                            <td>Mise à jour bureau BV001</td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn view-btn"><i class="fas fa-eye"></i></button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>14/07/2025 10:20</td>
                            <td>Marie Opérateur</td>
                            <td>Création</td>
                            <td>Candidats</td>
                            <td>Nouveau candidat CAN002</td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn view-btn"><i class="fas fa-eye"></i></button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </main>

    <script>
        // Toggle dropdown menus
        function toggleDropdown(menuId) {
            const dropdown = document.getElementById(menuId + '-dropdown');
            const allDropdowns = document.querySelectorAll('.dropdown');
            
            // Close all other dropdowns
            allDropdowns.forEach(d => {
                if (d !== dropdown) {
                    d.classList.remove('show');
                }
            });
            
            // Toggle current dropdown
            dropdown.classList.toggle('show');
        }

        // Show specific page
        function showPage(pageId) {
            // Hide all pages
            const pages = document.querySelectorAll('.page-content');
            pages.forEach(page => {
                page.classList.remove('active');
            });
            
            // Show selected page
            const selectedPage = document.getElementById(pageId);
            if (selectedPage) {
                selectedPage.classList.add('active');
            }
            
            // Update nav item active state
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => {
                item.classList.remove('active');
            });
            
            // Close all dropdowns
            const allDropdowns = document.querySelectorAll('.dropdown');
            allDropdowns.forEach(d => {
                d.classList.remove('show');
            });
        }

        // Close dropdowns when clicking outside
        document.addEventListener('click', function(event) {
            if (!event.target.closest('.nav-item')) {
                const allDropdowns = document.querySelectorAll('.dropdown');
                allDropdowns.forEach(d => {
                    d.classList.remove('show');
                });
            }
        });

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            // Set dashboard as active by default
            showPage('dashboard');
        });
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', async function () {
            const cameroonRegionsData = {
    'extreme-nord': {
        name: 'Extrême-Nord',
        capital: 'Maroua',
        totalRegistered: 1250000,
        totalVotes: 980000,
        turnout: 78.4,
        pollingStations: { total: 4000, reported: 4000 },
        results: { 'RDPC': 550000, 'UNDP': 220000, 'SDF': 110000, 'MRC': 50000, 'FSNC': 50000 }
    },
    'nord': {
        name: 'Nord',
        capital: 'Garoua',
        totalRegistered: 950000,
        totalVotes: 760000,
        turnout: 80.0,
        pollingStations: { total: 3200, reported: 3100 },
        results: { 'RDPC': 400000, 'UNDP': 250000, 'SDF': 60000, 'MRC': 30000, 'FSNC': 20000 }
    },
    'adamaoua': {
        name: 'Adamaoua',
        capital: 'Ngaoundéré',
        totalRegistered: 650000,
        totalVotes: 510000,
        turnout: 78.5,
        pollingStations: { total: 2000, reported: 1950 },
        results: { 'RDPC': 280000, 'UNDP': 150000, 'SDF': 50000, 'MRC': 20000, 'FSNC': 10000 }
    },
    'est': {
        name: 'Est',
        capital: 'Bertoua',
        totalRegistered: 800000,
        totalVotes: 620000,
        turnout: 77.5,
        pollingStations: { total: 2500, reported: 2400 },
        results: { 'RDPC': 450000, 'SDF': 80000, 'UNDP': 40000, 'MRC': 30000, 'FSNC': 20000 }
    },
    'centre': {
        name: 'Centre',
        capital: 'Yaoundé',
        totalRegistered: 2800000,
        totalVotes: 1950000,
        turnout: 69.6,
        pollingStations: { total: 7000, reported: 6800 },
        results: { 'RDPC': 1100000, 'MRC': 550000, 'SDF': 150000, 'UNDP': 80000, 'FSNC': 70000 }
    },
    'sud': {
        name: 'Sud',
        capital: 'Ebolowa',
        totalRegistered: 450000,
        totalVotes: 360000,
        turnout: 80.0,
        pollingStations: { total: 1500, reported: 1500 },
        results: { 'RDPC': 290000, 'SDF': 30000, 'MRC': 20000, 'UNDP': 10000, 'FSNC': 10000 }
    },
    'littoral': {
        name: 'Littoral',
        capital: 'Douala',
        totalRegistered: 2500000,
        totalVotes: 1600000,
        turnout: 64.0,
        pollingStations: { total: 6000, reported: 5500 },
        results: { 'RDPC': 700000, 'MRC': 500000, 'SDF': 250000, 'UNDP': 80000, 'FSNC': 70000 }
    },
    'ouest': {
        name: 'Ouest',
        capital: 'Bafoussam',
        totalRegistered: 1800000,
        totalVotes: 1350000,
        turnout: 75.0,
        pollingStations: { total: 5000, reported: 4900 },
        results: { 'SDF': 600000, 'RDPC': 500000, 'MRC': 150000, 'UNDP': 50000, 'FSNC': 50000 }
    },
    'nord-ouest': {
        name: 'Nord-Ouest',
        capital: 'Bamenda',
        totalRegistered: 1500000,
        totalVotes: 750000,
        turnout: 50.0,
        pollingStations: { total: 4500, reported: 3500 },
        results: { 'SDF': 450000, 'RDPC': 200000, 'MRC': 50000, 'UNDP': 30000, 'FSNC': 20000 }
    },
    'sud-ouest': {
        name: 'Sud-Ouest',
        capital: 'Buea',
        totalRegistered: 1300000,
        totalVotes: 780000,
        turnout: 60.0,
        pollingStations: { total: 4000, reported: 3200 },
        results: { 'RDPC': 400000, 'SDF': 250000, 'MRC': 80000, 'UNDP': 30000, 'FSNC': 20000 }
    }
};

const politicalParties = [
    { code: 'RDPC', name: 'Rassemblement Démocratique du Peuple Camerounais', color: '#1E40AF' },
    { code: 'SDF', name: 'Social Democratic Front', color: '#F59E0B' },
    { code: 'MRC', name: 'Mouvement pour la Renaissance du Cameroun', color: '#DC2626' },
    { code: 'UNDP', name: 'Union Nationale pour la Démocratie et le Progrès', color: '#10B981' },
    { code: 'FSNC', name: 'Front pour le Salut National du Cameroun', color: '#6D28D9' }
];

const getWinningParty = (results) => {
    return Object.keys(results).reduce((a, b) => results[a] > results[b] ? a : b);
};

const regionMapping = {
    'extreme-nord': 'cm-en', 'nord': 'cm-no', 'adamaoua': 'cm-ad', 'nord-ouest': 'cm-nw',
    'ouest': 'cm-ou', 'centre': 'cm-ce', 'est': 'cm-es', 'littoral': 'cm-lt', 'sud-ouest': 'cm-sw', 'sud': 'cm-su'
};

const topology = await fetch('https://code.highcharts.com/mapdata/countries/cm/cm-all.topo.json').then(response => response.json());

const chartData = Object.entries(cameroonRegionsData).map(([key, region]) => {
    const winningParty = getWinningParty(region.results);
    const party = politicalParties.find(p => p.code === winningParty);
    const mapKey = regionMapping[key] || key;
    return {
        'hc-key': mapKey,
        name: region.name,
        value: ((region.results[winningParty] / region.totalVotes) * 100),
        color: party?.color || '#9CA3AF',
        custom: { regionKey: key, regionData: region, winningParty, party, capital: region.capital }
    };
});

Highcharts.mapChart('map-container-div', {
    chart: { map: topology, backgroundColor: '#F9FAFB', height: 700, spacing: [10, 10, 10, 10] },
    title: { text: null },
    subtitle: { text: 'Survolez une région pour voir les résultats détaillés' },
    mapNavigation: { enabled: true, buttonOptions: { verticalAlign: 'bottom' } },
    legend: { enabled: true, layout: 'horizontal', align: 'center', verticalAlign: 'bottom', itemStyle: { fontSize: '12px' } },
    tooltip: {
        useHTML: true,
        backgroundColor: 'rgba(255, 255, 255, 0.95)',
        borderColor: '#CCCCCC',
        borderRadius: 8,
        shadow: true,
        formatter: function() {
            const point = this.point;
            const custom = point.custom;
            if (!custom) return '';
            const regionData = custom.regionData;
            let content = `<div style="padding: 12px; max-width: 320px; min-width: 260px;">
                <h3 style="margin: 0 0 8px 0; color: #1F2937; font-size: 16px; font-weight: bold;">${regionData.name}</h3>
                <p style="margin: 0 0 8px 0; color: #6B7280; font-size: 12px;"><strong>Capitale:</strong> ${custom.capital}</p>
                <h4 style="margin: 10px 0 5px 0; font-size: 14px; color: #374151; font-weight: 600;">Résultats par parti</h4>
                <ul style="list-style: none; padding: 0; margin: 0;">`;
            
            const sortedResults = Object.entries(regionData.results).sort(([, a], [, b]) => b - a);

            for (const [partyCode, votes] of sortedResults) {
                const partyData = politicalParties.find(p => p.code === partyCode);
                if (partyData) {
                    const percentage = ((votes / regionData.totalVotes) * 100).toFixed(1);
                    content += `<li style=\"display: flex; justify-content: space-between; align-items: center; padding: 8px 0; border-bottom: 1px solid #E5E7EB; min-width: 260px; word-break: break-word;\">
                        <span style=\"display: flex; align-items: center; gap: 8px; max-width: 120px;\">
                            <span style=\"width: 10px; height: 10px; border-radius: 50%; background-color: ${partyData.color}; margin-right: 8px; flex-shrink: 0;\"></span>
                            <span style=\"font-size: 13px; white-space: normal; word-break: break-word;\" title=\"${partyData.name}\">${partyData.code}</span>
                        </span>
                        <span style=\"font-weight: 600; font-size: 13px; margin-left: 10px; white-space: nowrap;\">${votes.toLocaleString()} (${percentage}%)</span>
                    </li>`;
                }
            }
            content += `</ul><p style=\"margin-top: 10px; text-align: right; font-size: 13px; color: #6B7280;\">
                <strong>Total des votes:</strong> ${regionData.totalVotes.toLocaleString()}</p></div>`;
            return content;
        }
    },
    plotOptions: {
        map: {
            cursor: 'pointer',
            states: { hover: { brightness: 0.1 }, select: { color: '#2563EB', borderColor: '#1D4ED8', borderWidth: 3 } },
            dataLabels: { enabled: true, format: '{point.name}', style: { color: '#FFFFFF', fontSize: '10px', fontWeight: 'bold', textOutline: '1px contrast' } }
        }
    },
    series: [{
        type: 'map',
        name: 'Résultats électoraux',
        data: chartData,
        joinBy: 'hc-key',
        nullColor: '#F3F4F6',
        borderColor: '#FFFFFF',
        borderWidth: 1,
        states: { hover: { brightness: 0.1, borderColor: '#2563EB', borderWidth: 2 } }
    }]
});

// --- National Stats Calculation and Rendering ---
const calculateNationalTotals = () => {
    const totals = {
        totalRegistered: 0,
        totalVotes: 0,
        results: {},
        pollingStations: { total: 0, reported: 0 }
    };

    for (const region of Object.values(cameroonRegionsData)) {
        totals.totalRegistered += region.totalRegistered;
        totals.totalVotes += region.totalVotes;
        totals.pollingStations.total += region.pollingStations.total;
        totals.pollingStations.reported += region.pollingStations.reported;
        for (const [party, votes] of Object.entries(region.results)) {
            if (!totals.results[party]) {
                totals.results[party] = 0;
            }
            totals.results[party] += votes;
        }
    }
    return totals;
};

const renderNationalStats = () => {
    const nationalData = calculateNationalTotals();
    const percentages = Object.fromEntries(
        Object.entries(nationalData.results).map(([code, votes]) => [
            code,
            (votes / nationalData.totalVotes) * 100
        ])
    );

    const sortedResults = Object.entries(nationalData.results)
        .map(([code, votes]) => ({
            code,
            votes,
            percentage: percentages[code],
            party: politicalParties.find(p => p.code === code)
        }))
        .sort((a, b) => b.votes - a.votes);

    const statsContainer = document.getElementById('national-stats-content');
    let content = '<div style="display: flex; flex-direction: column; gap: 15px;">';

    sortedResults.forEach((result, index) => {
        const partyColor = result.party?.color || '#9CA3AF';
        content += `
            <div style="position: relative; padding: 15px; border-radius: 8px; border: 1px solid #eee; background-color: #fcfcfc;">
                <div style="display: flex; align-items: center; gap: 15px;">
                    <div style="flex-shrink: 0; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; color: white; background-color: ${index < 3 ? ['#FFD700', '#C0C0C0', '#CD7F32'][index] : '#d1d5db'};">
                        ${index + 1}
                    </div>
                    <div style="flex: 1;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <h4 style="font-weight: 600; color: #2c3e50;" title="${result.party?.name || result.code}">${result.party?.code || result.code}</h4>
                            <div style="text-align: right;">
                                <p style="font-weight: bold; font-size: 16px; color: #2c3e50;">${result.percentage.toFixed(1)}%</p>
                                <p style="font-size: 13px; color: #7f8c8d;">${result.votes.toLocaleString()} voix</p>
                            </div>
                        </div>
                        <div style="margin-top: 8px; background-color: #eee; border-radius: 5px; height: 6px; overflow: hidden;">
                            <div style="width: ${result.percentage}%; height: 100%; background-color: ${partyColor}; transition: width 0.5s;"></div>
                        </div>
                    </div>
                </div>
            </div>`;
    });

    content += '</div>';
    statsContainer.innerHTML = content;

    // Render party legend below the map
    const legendContainer = document.getElementById('party-legend');
    if (legendContainer) {
        let legendHTML = '';
        politicalParties.forEach(party => {
            legendHTML += `<span style="display: flex; align-items: center; gap: 6px; margin: 2px 8px;">
                <span style="width: 14px; height: 14px; border-radius: 50%; background-color: ${party.color}; display: inline-block;"></span>
                <span style="font-size: 13px; font-weight: 600; color: #222;" title="${party.name}">${party.code}</span>
            </span>`;
        });
        legendContainer.innerHTML = legendHTML;
    }
};

renderNationalStats();
        });
    </script>
</body>
</html>